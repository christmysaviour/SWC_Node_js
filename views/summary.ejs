<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summary</title>
    <link rel="stylesheet" href="/styles.css">
    <style>
      header {
        background-color: #ff5722;
      }
      body {
        background-color: aliceblue;
      }
      .summary-body {
        padding: 20px;
      }
      .food-order {
        margin-bottom: 20px;
        border-bottom: 1px solid #ddd;
        padding-bottom: 10px;
      }
      .food-image {
        width: 100px;
        height: 100px;
        object-fit: cover;
      }
      .btn-update-delete {
        margin-top: 10px;
      }
    </style>
</head>
<body>
    <header>
      <div class="title">
          <a href="/main"><h1>Traditional American Cuisine</h1></a>
      </div>
      <div class="nav_right">
          <a href="/order-history">Order History</a>
          <a href="/profile">Profile</a>
          <a href="/logout">Sign Out</a>
      </div>
    </header>

    <div class="summary-body">
        <div class="summary-title">
            <h1>Order Cart Summary</h1>
        </div>

        <% if (data.items.length === 0) { %>
            <p>Your cart is empty.</p>
        <% } else { %>
            <% data.items.forEach(item => { %>
                <div class="food-order">
                    <img class="food-image" src="<%= item.image %>" alt="<%= item.name %>">
                    <div>
                        <h3><%= item.name %></h3>
                        <p>Price/item: $<%= item.price.toFixed(2) %></p>
                        <form action="/update-quantity/<%= item._id %>?orderId=<%= token_id %>" method="POST">
                            <label for="quantity-<%= item._id %>">Quantity:</label>
                            <input type="number" id="quantity-<%= item._id %>" name="quantity" value="<%= item.quantity %>" min="1" required>
                            <button type="submit" class="update">Update</button>
                        </form>
                        <form action="/delete-item/<%= item._id %>?orderId=<%= token_id %>" method="POST">
                            <button type="submit" class="delete">Delete</button>
                        </form>
                    </div>
                </div>
            <% }); %>

            <% let totalprice = 0; %>
            <% data.items.forEach(item => { %>
                <% totalprice += item.price * item.quantity; %>
            <% }); %>
            
            <div class="summary-price">
                <h3>Total Price: $<%= totalprice.toFixed(2) %></h3>
                <form method="get" action="/thankyou">
                    <button type="submit" class="pay-submit">Pay</button>
                </form>
            </div>
        <% } %>
    </div>

    <footer>
        <p>&copy; 2023 Traditional American Cuisine. All rights reserved.</p>
    </footer>
</body>
</html>
